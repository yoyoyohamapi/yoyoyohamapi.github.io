<!DOCTYPE html>
<html lang="">
  <head>
    
<meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>


<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />



  <meta name="description" content="数字图像处理（4）-- 图像增强：灰度变化"/>




  <meta name="keywords" content="数字图像处理," />




  <link rel="alternate" href="/atom.xml" title="吴小蛆的巣">




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=2.4.x" />



<link rel="canonical" href="http://yoyoyohamapi.me/2017/03/08/Image_Processing/数字图像处理（4）-- 图像增强：灰度变化/"/>


<meta name="description" content="图像增强的基本方法：空间域处理（增强构成图像的像素）： 点处理（图象灰度变换、直方图均衡等）。 邻域处理（线性、非线性平滑和锐化等）。  频域处理 ：高、低通滤波、同态滤波等 空间域增强公式 $g(x,y)=T[f(x,y)]$ 其中： $f(x,y)$：输入图像 $g(x,y)$：输出图像 $T$ 是对 $f$ 的一种操作，定义在（x,y）的邻域上。 空间域一般的方法是利用点 $(x,y)$ 事">
<meta name="keywords" content="数字图像处理">
<meta property="og:type" content="article">
<meta property="og:title" content="数字图像处理（4）-- 图像增强：灰度变化">
<meta property="og:url" content="http://yoyoyohamapi.me/2017/03/08/Image_Processing/数字图像处理（4）-- 图像增强：灰度变化/index.html">
<meta property="og:site_name" content="吴小蛆的巣">
<meta property="og:description" content="图像增强的基本方法：空间域处理（增强构成图像的像素）： 点处理（图象灰度变换、直方图均衡等）。 邻域处理（线性、非线性平滑和锐化等）。  频域处理 ：高、低通滤波、同态滤波等 空间域增强公式 $g(x,y)=T[f(x,y)]$ 其中： $f(x,y)$：输入图像 $g(x,y)$：输出图像 $T$ 是对 $f$ 的一种操作，定义在（x,y）的邻域上。 空间域一般的方法是利用点 $(x,y)$ 事">
<meta property="og:image" content="http://7pulhb.com1.z0.glb.clouddn.com/ip - 灰度变换. png">
<meta property="og:image" content="http://7pulhb.com1.z0.glb.clouddn.com/ip - 幂次变换. png">
<meta property="og:image" content="http://7pulhb.com1.z0.glb.clouddn.com/ip - 对比拉伸. jpg">
<meta property="og:updated_time" content="2017-03-08T02:17:57.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="数字图像处理（4）-- 图像增强：灰度变化">
<meta name="twitter:description" content="图像增强的基本方法：空间域处理（增强构成图像的像素）： 点处理（图象灰度变换、直方图均衡等）。 邻域处理（线性、非线性平滑和锐化等）。  频域处理 ：高、低通滤波、同态滤波等 空间域增强公式 $g(x,y)=T[f(x,y)]$ 其中： $f(x,y)$：输入图像 $g(x,y)$：输出图像 $T$ 是对 $f$ 的一种操作，定义在（x,y）的邻域上。 空间域一般的方法是利用点 $(x,y)$ 事">
<meta name="twitter:image" content="http://7pulhb.com1.z0.glb.clouddn.com/ip - 灰度变换. png">


<link rel="stylesheet" type="text/css" href="/css/style.css?v=2.4.x" />







<script>
  var CONFIG = {
    search: false,
    searchPath: "/search.xml",
    fancybox: false,
    toc: true,
  }
</script>




  



    <title> 数字图像处理（4）-- 图像增强：灰度变化 · 吴小蛆的巣 </title>
  </head>

  <body><div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/." class="logo">吴小蛆的巣</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>

<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    
      <a href="/">
        <li class="mobile-menu-item">
          
          
            Home
          
        </li>
      </a>
    
      <a href="/archives/">
        <li class="mobile-menu-item">
          
          
            Archives
          
        </li>
      </a>
    
      <a href="/tags">
        <li class="mobile-menu-item">
          
          
            Tags
          
        </li>
      </a>
    
      <a href="/categories">
        <li class="mobile-menu-item">
          
          
            Categories
          
        </li>
      </a>
    
  </ul>
</nav>

    <div class="container" id="mobile-panel">
      <header id="header" class="header"><div class="logo-wrapper">
  <a href="/." class="logo">吴小蛆的巣</a>
</div>

<nav class="site-navbar">
  
    <ul id="menu" class="menu">
      
        <li class="menu-item">
          <a class="menu-item-link" href="/">
            
            
              Home
            
          </a>
        </li>
      
        <li class="menu-item">
          <a class="menu-item-link" href="/archives/">
            
            
              Archives
            
          </a>
        </li>
      
        <li class="menu-item">
          <a class="menu-item-link" href="/tags">
            
            
              Tags
            
          </a>
        </li>
      
        <li class="menu-item">
          <a class="menu-item-link" href="/categories">
            
            
              Categories
            
          </a>
        </li>
      
      
    </ul>
  
</nav>

      </header>

      <main id="main" class="main">
        <div class="content-wrapper">
          <div id="content" class="content">
            
  
  <article class="post">
    <header class="post-header">
      <h1 class="post-title">
        
          数字图像处理（4）-- 图像增强：灰度变化
        
      </h1>

      <div class="post-meta">
        <span class="post-time">
          Mar 8, 2017
        </span>
      </div>
    </header>

    
    
  <div class="post-toc" id="post-toc">
    <h2 class="post-toc-title">Contents</h2>
    <div class="post-toc-content">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#图像增强的基本方法："><span class="toc-text">图像增强的基本方法：</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#空间域处理（增强构成图像的像素）："><span class="toc-text">空间域处理（增强构成图像的像素）：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#频域处理-："><span class="toc-text">频域处理 ：</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#空间域增强"><span class="toc-text">空间域增强</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#灰度变换：-s-T-r-—————-s-为输出灰度值，-r-为输入灰度值"><span class="toc-text">灰度变换：$s=T(r)$—————-$s$ 为输出灰度值，$r$ 为输入灰度值</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#分段线性变换"><span class="toc-text">分段线性变换</span></a></li></ol></li></ol>
    </div>
  </div>


    <div class="post-content">
      
        <h2 id="图像增强的基本方法："><a href="#图像增强的基本方法：" class="headerlink" title="图像增强的基本方法："></a>图像增强的基本方法：</h2><h3 id="空间域处理（增强构成图像的像素）："><a href="#空间域处理（增强构成图像的像素）：" class="headerlink" title="空间域处理（增强构成图像的像素）："></a>空间域处理（增强构成图像的像素）：</h3><ul>
<li><strong>点处理</strong>（图象灰度变换、直方图均衡等）。</li>
<li><strong>邻域处理</strong>（线性、非线性平滑和锐化等）。</li>
</ul>
<h3 id="频域处理-："><a href="#频域处理-：" class="headerlink" title="频域处理 ："></a>频域处理 ：</h3><p><strong>高、低通滤波</strong>、<strong>同态滤波</strong>等</p>
<h2 id="空间域增强"><a href="#空间域增强" class="headerlink" title="空间域增强"></a>空间域增强</h2><p>公式 $g(x,y)=T[f(x,y)]$</p>
<p>其中：</p>
<p>$f(x,y)$：输入图像</p>
<p>$g(x,y)$：输出图像</p>
<p>$T$ 是对 $f$ 的一种操作，定义在（x,y）的邻域上。</p>
<p>空间域一般的方法是利用点 $(x,y)$ 事先定义的邻域里的一个 f 值的函数来决定 $g$ 在 $(x,y)$ 的值, 主要是利用所谓的模板（也称为滤波器, 核, 掩模）. 模板是一个小的 (3×3) 二维阵列, 模板的系数值决定了处理的性质, 如图像尖锐化等. 以这种方法为基础的增强技术通常是指<strong>模板处理</strong>或<strong>空域滤波</strong>.</p>
<h3 id="灰度变换：-s-T-r-—————-s-为输出灰度值，-r-为输入灰度值"><a href="#灰度变换：-s-T-r-—————-s-为输出灰度值，-r-为输入灰度值" class="headerlink" title="灰度变换：$s=T(r)$—————-$s$ 为输出灰度值，$r$ 为输入灰度值"></a>灰度变换：$s=T(r)$—————-$s$ 为输出灰度值，$r$ 为输入灰度值</h3><ul>
<li><p><strong>线性变换</strong>(正比或反比)</p>
</li>
<li><p><strong>对数变换</strong>(对数和反对数的)</p>
</li>
<li><p><strong>幂次变换</strong>(n 次幂和 n 次方根变换)</p>
</li>
</ul>
<p>注：下图的灰度级是均一化的灰度级</p>
<p><img src="http://7pulhb.com1.z0.glb.clouddn.com/ip - 灰度变换. png" alt="灰度变换"></p>
<p>Ex：（灰度已经均一化）</p>
<ul>
<li><p><strong>图像反转</strong>：s=L-1-r(考虑灰度级为[0,L-1], 显然，原来灰度值为 L-1 的输出后灰度值为 0, 实现了反色)</p>
</li>
<li><p><strong>对数变换</strong>：s=clog(1+r)（由上图知道，对数变换曲线处于正比函数上方，图像变亮，c 值用来控制灰度不超值？）</p>
</li>
<li><p><strong>幂次变换</strong>：s=crγ（伽马校正，当γ&lt;0 时，变换函数曲线在正比函数上方（因为均一化造成），输出灰度级变小。即此时扩展低灰度级，压缩高灰度级，使图像变亮，如下图所示。反之使图像变暗。）</p>
</li>
</ul>
<p><img src="http://7pulhb.com1.z0.glb.clouddn.com/ip - 幂次变换. png" alt="幂次变换"></p>
<p>幂次变换代码片：</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;opencv2\highgui\highgui.hpp&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;opencv2\imgproc\imgproc.hpp&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> cv;</div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="comment">//Global variables</span></div><div class="line"><span class="keyword">const</span> <span class="keyword">char</span> *winNameSrc = <span class="string">"Src Image!"</span>;</div><div class="line"><span class="keyword">const</span> <span class="keyword">char</span> *winNameDst = <span class="string">"Dst Image!"</span>;</div><div class="line">Mat imgSrc, imgDst;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</div><div class="line">  <span class="keyword">const</span> <span class="keyword">char</span> *imgPath = <span class="string">"F:\\ImgPrcSrcs\\DIP3E_Original_Images_CH03\\Fig0309(a)(washed_out_aerial_image).tif"</span>;</div><div class="line">  imgSrc = imread(imgPath,CV_LOAD_IMAGE_GRAYSCALE);</div><div class="line">  namedWindow(winNameSrc,CV_WINDOW_AUTOSIZE);</div><div class="line">  imshow(winNameSrc,imgSrc);</div><div class="line">  imgSrc.convertTo(imgSrc, CV_32FC1);</div><div class="line">  <span class="comment">// 重要！幂次变换考虑将灰度级归一化</span></div><div class="line">  normalize(imgSrc, imgDst, <span class="number">1.0</span>, <span class="number">0.0</span>, NORM_MINMAX);</div><div class="line">  <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; imgDst.rows; i++)&#123;</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; imgDst.cols; j++)&#123;</div><div class="line">      imgDst.at&lt;<span class="keyword">float</span>&gt;(i, j) = <span class="built_in">pow</span>(imgDst.at&lt;<span class="keyword">float</span>&gt;(i, j),<span class="number">5.0</span>);</div><div class="line">    &#125;</div><div class="line">   &#125;</div><div class="line">   <span class="comment">// 重构灰度级，方便图像显示</span></div><div class="line">   normalize(imgDst, imgDst, <span class="number">255.0</span>, <span class="number">0.0</span>, NORM_MINMAX);</div><div class="line">   namedWindow(winNameDst, CV_WINDOW_AUTOSIZE);</div><div class="line">   imgDst.convertTo(imgDst, CV_8UC1);</div><div class="line">   imshow(winNameDst,imgDst);</div><div class="line">   waitKey(<span class="number">0</span>);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="分段线性变换"><a href="#分段线性变换" class="headerlink" title="分段线性变换"></a>分段线性变换</h3><p>顾名思义，在不同灰度区间采用线性变换，以<strong>对比拉伸</strong>为例：</p>
<p><img src="http://7pulhb.com1.z0.glb.clouddn.com/ip - 对比拉伸. jpg" alt="对比拉伸"></p>
<p>ab</p>
<p>cd</p>
<p>(a)变换函数的形式 (b)低对比度图像 (c)对比度拉伸的结果 (d)门限化的结果</p>
<p>由 a 图可以看出，亮处变亮，暗处变暗, 中部灰度剧烈变化，即提高了明暗对比。代码如下：</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;opencv2\highgui\highgui.hpp&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;opencv2\imgproc\imgproc.hpp&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> cv;</div><div class="line"> </div><div class="line"><span class="comment">//Global Variables</span></div><div class="line">Mat imgSrc, imgGray, imgDst;</div><div class="line"><span class="keyword">const</span> <span class="keyword">char</span> *winNameSrc = <span class="string">"Src Image!"</span>;</div><div class="line"><span class="keyword">const</span> <span class="keyword">char</span> *winNameDst = <span class="string">"Dst Image!"</span>;</div><div class="line"> </div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</div><div class="line">  <span class="keyword">const</span> <span class="keyword">char</span> *imgPath = <span class="string">"F:\\ImgPrcSrcs\\DIP3E_Original_Images_CH03\\Fig0310(b)(washed_out_pollen_image).tif"</span>;</div><div class="line">  imgSrc = imread(imgPath);</div><div class="line">  cvtColor(imgSrc,imgGray,CV_RGB2GRAY);</div><div class="line">  <span class="comment">// 灰度格式转换 </span></div><div class="line">  imgGray.convertTo(imgGray,CV_32FC1);</div><div class="line">  <span class="comment">// 归一化图像</span></div><div class="line">  normalize(imgGray,imgDst,<span class="number">1.0</span>,<span class="number">0.0</span>,NORM_MINMAX);</div><div class="line">  <span class="comment">// 进行对比拉伸</span></div><div class="line">  <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; imgDst.rows; i++)&#123;</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; imgDst.cols; j++)&#123;</div><div class="line">      <span class="keyword">if</span> (imgDst.at&lt;<span class="keyword">float</span>&gt;(i, j) &lt;= (<span class="keyword">float</span>)<span class="number">1</span>/ <span class="number">3</span>)</div><div class="line">        imgDst.at&lt;<span class="keyword">float</span>&gt;(i, j) = <span class="number">0.5</span>*imgDst.at&lt;<span class="keyword">float</span>&gt;(i, j);</div><div class="line">      <span class="keyword">else</span> <span class="keyword">if</span> (imgDst.at&lt;<span class="keyword">float</span>&gt;(i, j) &gt;= (<span class="keyword">float</span>)<span class="number">2</span> / <span class="number">3</span>)</div><div class="line">        imgDst.at&lt;<span class="keyword">float</span>&gt;(i, j) = <span class="number">0.5</span>*imgDst.at&lt;<span class="keyword">float</span>&gt;(i, j) + <span class="number">0.5</span>;</div><div class="line">      <span class="keyword">else</span></div><div class="line">        imgDst.at&lt;<span class="keyword">float</span>&gt;(i, j) = <span class="number">2</span> * imgDst.at&lt;<span class="keyword">float</span>&gt;(i, j) - <span class="number">0.5</span>;</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">  <span class="comment">// 重构灰度级，方便显示</span></div><div class="line">  normalize(imgDst,imgDst,<span class="number">255.0</span>,<span class="number">0</span>,NORM_MINMAX);</div><div class="line">  imgDst.convertTo(imgDst, CV_8UC1);</div><div class="line">  namedWindow(winNameSrc,CV_WINDOW_AUTOSIZE);</div><div class="line">  imshow(winNameSrc,imgSrc);</div><div class="line">  namedWindow(winNameDst,CV_WINDOW_AUTOSIZE);</div><div class="line">  imshow(winNameDst,imgDst);</div><div class="line">  waitKey(<span class="number">0</span>);</div><div class="line">&#125;</div><div class="line">``` </div><div class="line"></div><div class="line">### 灰度切割（高亮感兴趣灰度级）</div><div class="line"></div><div class="line"></div><div class="line">![灰度切割](http:<span class="comment">//7pulhb.com1.z0.glb.clouddn.com/ip - 灰度切割. jpg)</span></div><div class="line"></div><div class="line">a 图中显示灰度值处于 AB 间的灰度保持恒定高亮，其余灰度保持为恒定值（变暗），这样就突出目标，消除背景。</div><div class="line"></div><div class="line">b 图中 A~B 变暗，其余灰度不变，显然就有利于突出目标，保留背景细节。</div><div class="line"></div><div class="line"> 下面图像左侧为原图，右侧为试用 b 变换突出了目标区域，并保留了其余细节。</div><div class="line"></div><div class="line">![高亮 ROI](http:<span class="comment">//7pulhb.com1.z0.glb.clouddn.com/ip - 高亮 ROI.jpg)</span></div><div class="line"></div><div class="line">代码如下：</div><div class="line"></div><div class="line">```cpp</div><div class="line">#include &lt;opencv2\highgui\highgui.hpp&gt;</div><div class="line">#include &lt;opencv2\imgproc\imgproc.hpp&gt;</div><div class="line">#include &lt;iostream&gt;</div><div class="line"> </div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> cv;</div><div class="line"> </div><div class="line"><span class="comment">//Global Variables</span></div><div class="line">Mat imgSrc, imgGray, imgDst;</div><div class="line"><span class="keyword">const</span> <span class="keyword">char</span> *winNameSrc = <span class="string">"Src Image!"</span>;</div><div class="line"><span class="keyword">const</span> <span class="keyword">char</span> *winNameDst = <span class="string">"Dst Image!"</span>;</div><div class="line"><span class="keyword">int</span> beginLevel = <span class="number">150</span>, endLevel = <span class="number">200</span>;<span class="comment">// 感兴趣的灰度区间 </span></div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxLevel = <span class="number">255</span>;</div><div class="line"> </div><div class="line"><span class="comment">//Funcation Daclarations</span></div><div class="line"><span class="keyword">void</span> IntensitySlicing(<span class="keyword">int</span> ,<span class="keyword">void</span> *);</div><div class="line"> </div><div class="line"><span class="keyword">int</span> main()&#123;</div><div class="line">  <span class="keyword">const</span> <span class="keyword">char</span> *imgPath = <span class="string">"F:\\ImgPrcSrcs\\DIP3E_Original_Images_CH03\\Fig0312(a)(kidney).tif"</span>;</div><div class="line">  imgSrc = imread(imgPath);</div><div class="line">  cvtColor(imgSrc, imgGray, CV_RGB2GRAY);</div><div class="line">  namedWindow(winNameSrc, CV_WINDOW_AUTOSIZE);</div><div class="line">  imshow(winNameSrc, imgSrc);</div><div class="line">  createTrackbar(<span class="string">"begin level:"</span>, winNameSrc, &amp;amp;beginLevel, maxLevel,IntensitySlicing);</div><div class="line">  createTrackbar(<span class="string">"end level:"</span>, winNameSrc, &amp;amp;endLevel, maxLevel, IntensitySlicing);</div><div class="line">  waitKey(<span class="number">0</span>);</div><div class="line">&#125;</div><div class="line"> </div><div class="line"><span class="keyword">void</span> IntensitySlicing(<span class="keyword">int</span>, <span class="keyword">void</span> *)&#123;</div><div class="line">  imgDst = imgGray.clone();</div><div class="line">  imgDst.convertTo(imgDst, CV_32SC1);</div><div class="line">  <span class="built_in">cout</span> &lt;&lt; <span class="string">"["</span>&lt;&lt;beginLevel &lt;&lt;<span class="string">","</span>&lt;&lt;endLevel&lt;&lt;<span class="string">"]"</span>&lt;&lt; <span class="built_in">endl</span>;</div><div class="line">  <span class="keyword">if</span> (endLevel &gt; beginLevel)&#123;</div><div class="line">    <span class="comment">// 进行高亮感兴趣区域</span></div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; imgDst.rows; i++)&#123;</div><div class="line">      <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; imgDst.cols; j++)&#123;</div><div class="line">        <span class="comment">// 落在灰度区间的变亮</span></div><div class="line">        <span class="keyword">if</span> (imgDst.at&lt;<span class="keyword">int</span>&gt;(i, j) &gt;= beginLevel &amp;amp;&amp;amp; imgDst.at&lt;<span class="keyword">int</span>&gt;(i, j) &lt;= endLevel)&#123;</div><div class="line">          imgDst.at&lt;<span class="keyword">int</span>&gt;(i, j) = <span class="number">250</span>;</div><div class="line">         &#125;</div><div class="line">   <span class="comment">// 反之不变</span></div><div class="line">      &#125;	</div><div class="line"> 		&#125;</div><div class="line"> 	&#125;</div><div class="line">   imgDst.convertTo(imgDst,CV_8UC1);</div><div class="line">   namedWindow(winNameDst, CV_WINDOW_AUTOSIZE);</div><div class="line">   imshow(winNameDst, imgDst);</div><div class="line">&#125;</div><div class="line">``` </div><div class="line"></div><div class="line">### 位图切割：</div><div class="line"></div><div class="line"> 假设灰度值用 < span class="number">8bit 表示，则每一位即代表一个位平面，图像将被分为 < span class="number">8 个位平面（bit plane），每个平面的像素的灰度即为该位平面的十进制值。</div><div class="line"></div><div class="line">如__00100010__灰度会被分为 < span class="number">8 个位平面 </div><div class="line"></div><div class="line">（<span class="number">00000000</span>,<span class="number">00000000</span>,<span class="number">00100000</span>,<span class="number">00000000</span>,<span class="number">00000000</span>,<span class="number">00000000</span>,<span class="number">0000010</span>,<span class="number">00000000</span>）。</div><div class="line"></div><div class="line"> 显然每个位平面（bit plane）是可以考虑构成一副二值图像，如第 < span class="number">8 位只可能构成 < span class="number">10000000（<span class="number">128</span>）或者 < span class="number">00000000（<span class="number">0</span>），即原像素灰度最高位等于 < span class="number">1（即灰度属于 [<span class="number">128</span>,<span class="number">255</span>]）者的第 < span class="number">8 位平面灰度为 < span class="number">128（二值化后令为 < span class="number">1），最高位等于 < span class="number">0(即灰度属于[<span class="number">0</span>,<span class="number">127</span>]) 者的第 < span class="number">8 位平面灰度为 < span class="number">0（二值化后令为零）;</div><div class="line"></div><div class="line">再考虑第 < span class="number">1 位只可能构成 < span class="number">00000001（<span class="number">1</span>）或者 < span class="number">00000000（<span class="number">0</span>），即原像素灰度最低位等于 < span class="number">1（即灰度属于 [<span class="number">1</span>,<span class="number">255</span>]）者的第 < span class="number">1 位平面灰度为 < span class="number">1（二值化后为 < span class="number">1），而等于 < span class="number">0（即灰度属于 < span class="number">0）者的第一位平面灰度为 < span class="number">0（二值化后为 < span class="number">0）。</div><div class="line"></div><div class="line"> 注意到下图（第一幅为原图，而其余图像为第 < span class="number">1 到第 < span class="number">8 位平面的二值化图像），一个图像的高阶位如前 < span class="number">4 位包含视觉上很重要的大多数数据；其它位对图像中的更多微小细节（暗部细节）有作用。（Why？因为某像素灰度高位数字构成的位平面更接近于原始强度，如某像素的灰度为 < span class="number">11000010（<span class="number">194</span>），其最高位构成的位平面为 < span class="number">1000000（<span class="number">128</span>，二值化后为 < span class="number">1，即白色，与原灰度接近）相对于第二位 < span class="number">00000010（<span class="number">2</span>，二值化后为 < span class="number">0，即黑色，与原灰度差异过大）更加接近 < span class="number">194）</div><div class="line"></div><div class="line">![位图切割](http:<span class="comment">//7pulhb.com1.z0.glb.clouddn.com/ip - 位图切割. png)</span></div><div class="line"></div><div class="line"> 示例代码如下：</div><div class="line"></div><div class="line">```cpp</div><div class="line">#include &lt;opencv2\highgui\highgui.hpp&gt;</div><div class="line">#include &lt;opencv2\imgproc\imgproc.hpp&gt;</div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> cv;</div><div class="line"><span class="comment">//Global Variables</span></div><div class="line">Mat imgSrc, imgGray, imgDst;</div><div class="line"><span class="keyword">const</span> <span class="keyword">char</span> *winNameSrc = <span class="string">"Src Image!"</span>;</div><div class="line"><span class="keyword">const</span> <span class="keyword">char</span> *winNameDst = <span class="string">"Dst Image!"</span>;</div><div class="line"><span class="keyword">int</span> n=<span class="number">4</span>;<span class="comment">// 第 n 位位平面</span></div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxLevel = <span class="number">8</span>;</div><div class="line"><span class="comment">//Funcation Daclarations</span></div><div class="line"><span class="keyword">void</span> getNthBitPlane(<span class="keyword">int</span> ,<span class="keyword">void</span> *);</div><div class="line"><span class="keyword">int</span> main()&#123;</div><div class="line">  <span class="keyword">const</span> <span class="keyword">char</span> *imgPath = <span class="string">"F:\\ImgPrcSrcs\\DIP3E_Original_Images_CH03\\Fig0314(a)(100-dollars).tif"</span>;</div><div class="line">  imgSrc = imread(imgPath);</div><div class="line">  cvtColor(imgSrc, imgGray, CV_RGB2GRAY);</div><div class="line">  namedWindow(winNameSrc, CV_WINDOW_AUTOSIZE);</div><div class="line">  imshow(winNameSrc, imgSrc);</div><div class="line">  createTrackbar(<span class="string">"nth bit plane:\n"</span>, winNameSrc, &amp;amp;n, maxLevel, getNthBitPlane);</div><div class="line">  getNthBitPlane(<span class="number">0</span>, <span class="number">0</span>);</div><div class="line">  waitKey(<span class="number">0</span>);</div><div class="line">&#125;</div><div class="line"><span class="keyword">void</span> getNthBitPlane(<span class="keyword">int</span>, <span class="keyword">void</span> *)&#123;</div><div class="line">  imgDst = imgGray.clone();</div><div class="line">  <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; imgDst.rows; i++)&#123;</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; imgDst.cols; j++)&#123;</div><div class="line">      <span class="comment">// 通过移位操作获取第 n 位</span></div><div class="line">      <span class="keyword">int</span> bit = (<span class="keyword">int</span>)(imgDst.at&lt;uchar&gt;(i, j) &gt;&gt; (n - <span class="number">1</span>));</div><div class="line">      <span class="keyword">if</span> (bit == <span class="number">1</span>)</div><div class="line">      imgDst.at&lt;uchar&gt;(i, j) = <span class="number">255</span>;<span class="comment">// 二值化</span></div><div class="line">      <span class="keyword">else</span></div><div class="line">      imgDst.at&lt;uchar&gt;(i, j) = <span class="number">0</span>;</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">  namedWindow(winNameDst, CV_WINDOW_AUTOSIZE);</div><div class="line">  imshow(winNameDst, imgDst);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
      
    </div>

    
      
      

  <div class="post-copyright">
    <p class="copyright-item">
      <span>作者: </span>
      <span>吴晓军</span>
    </p>
    <p class="copyright-item">
      <span>来源: </span>
      <a href="http://yoyoyohamapi.me">http://yoyoyohamapi.me</a>
    </p>
    <p class="copyright-item">
      <span>链接: </span>
      <a href="http://yoyoyohamapi.me/2017/03/08/Image_Processing/数字图像处理（4）-- 图像增强：灰度变化/">http://yoyoyohamapi.me/2017/03/08/Image_Processing/数字图像处理（4）-- 图像增强：灰度变化/</a>
    </p>

    <p class="copyright-item lincese">
      
      本文采用<a rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/" target="_blank">知识共享署名-非商业性使用 4.0 国际许可协议</a>进行许可
    </p>
  </div>



      
      
    

    
      <footer class="post-footer">
        
          <div class="post-tags">
            
              <a href="/tags/数字图像处理/">数字图像处理</a>
            
          </div>
        
        
        
  <nav class="post-nav">
    
      <a class="prev" href="/2017/03/08/Image_Processing/数字图像处理（3）-- 图像处理的概率方法/">
        <i class="iconfont icon-left"></i>
        <span class="prev-text nav-default">数字图像处理（3）-- 图像处理的概率方法</span>
        <span class="prev-text nav-mobile">Prev</span>
      </a>
    
    
      <a class="next" href="/2017/03/08/Image_Processing/数字图像处理（6）-- 图像增强：空间滤波/">
        <span class="next-text nav-default">数字图像处理（6）-- 图像增强：空间滤波</span>
        <span class="prev-text nav-mobile">Next</span>
        <i class="iconfont icon-right"></i>
      </a>
    
  </nav>

      </footer>
    

  </article>


          </div>
          
  <div class="comments" id="comments">
    
  </div>


        </div>  
      </main>

      <footer id="footer" class="footer">

  <div class="social-links">
    
      
        
          <a href="mailto:softshot37@gmail.com" class="iconfont icon-email" title="email"></a>
        
      
    
      
    
      
    
      
    
      
    
      
    
      
        
          <a href="https://github.com/yoyoyohamapi" class="iconfont icon-github" title="github"></a>
        
      
    
      
    
      
        
          <a href="https://www.zhihu.com/people/wu-xiao-jun-64-55/activities" class="iconfont icon-zhihu" title="zhihu"></a>
        
      
    
      
    
    
    
      <a href="/atom.xml" class="iconfont icon-rss" title="rss"></a>
    
  </div>


<div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://hexo.io/">Hexo</a>
  </span>
  
  <span class="theme-info">
    Theme - 
    <a class="theme-link" href="https://github.com/ahonn/hexo-theme-even">Even</a>
  </span>

  <span class="copyright-year">
    
    &copy; 
     
      2015 - 
    
    2017

    <span class="heart">
      <i class="iconfont icon-heart"></i>
    </span>
    <span class="author">吴晓军</span>
  </span>
</div>
      </footer>

      <div class="back-to-top" id="back-to-top">
        <i class="iconfont icon-up"></i>
      </div>
    </div>

    
  

  
  




    




  
    <script type="text/javascript" src="/lib/jquery/jquery-3.1.1.min.js"></script>
  

  
    <script type="text/javascript" src="/lib/slideout/slideout.js"></script>
  

  


    <script type="text/javascript" src="/js/src/even.js?v=2.4.x"></script>
<script type="text/javascript" src="/js/src/bootstrap.js?v=2.4.x"></script>

    
  <!-- mathjax config similar to math.stackexchange -->

<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
    });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for(i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>

<script type="text/javascript" src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
</body>
</html>
